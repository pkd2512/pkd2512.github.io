var ft=Object.defineProperty,ut=Object.defineProperties;var dt=Object.getOwnPropertyDescriptors;var pe=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var He=(e,a,s)=>a in e?ft(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,V=(e,a)=>{for(var s in a||(a={}))Be.call(a,s)&&He(e,s,a[s]);if(pe)for(var s of pe(a))Ge.call(a,s)&&He(e,s,a[s]);return e},z=(e,a)=>ut(e,dt(a));var Ke=(e,a)=>{var s={};for(var r in e)Be.call(e,r)&&a.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&pe)for(var r of pe(e))a.indexOf(r)<0&&Ge.call(e,r)&&(s[r]=e[r]);return s};var O=(e,a,s)=>new Promise((r,g)=>{var d=h=>{try{l(s.next(h))}catch(w){g(w)}},v=h=>{try{l(s.throw(h))}catch(w){g(w)}},l=h=>h.done?r(h.value):Promise.resolve(h.value).then(d,v);l((s=s.apply(e,a)).next())});import{o as Ee,t as Se}from"../chunks/scheduler.b148b36d.js";import{S as at,a as rt,I as H,g as ze,f as Je,b as ke,c as ge,s as ie,i as Re,d as J,e as G,o as We,P as Ye,h as ht}from"../chunks/singletons.8b077a62.js";import{R as Xe,H as se,N as pt}from"../chunks/control.c2cf8273.js";function gt(e,a){return e==="/"||a==="ignore"?e:a==="never"?e.endsWith("/")?e.slice(0,-1):e:a==="always"&&!e.endsWith("/")?e+"/":e}function mt(e){return e.split("%25").map(decodeURI).join("%25")}function wt(e){for(const a in e)e[a]=decodeURIComponent(e[a]);return e}const yt=["href","pathname","search","searchParams","toString","toJSON"];function _t(e,a){const s=new URL(e);for(const r of yt)Object.defineProperty(s,r,{get(){return a(),e[r]},enumerable:!0,configurable:!0});return vt(s),s}function vt(e){Object.defineProperty(e,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const bt="/__data.json";function Et(e){return e.replace(/\/$/,"")+bt}function St(...e){let a=5381;for(const s of e)if(typeof s=="string"){let r=s.length;for(;r;)a=a*33^s.charCodeAt(--r)}else if(ArrayBuffer.isView(s)){const r=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);let g=r.length;for(;g;)a=a*33^r[--g]}else throw new TypeError("value must be a string or TypedArray");return(a>>>0).toString(36)}const ot=window.fetch;window.fetch=(e,a)=>((e instanceof Request?e.method:(a==null?void 0:a.method)||"GET")!=="GET"&&ce.delete(Pe(e)),ot(e,a));const ce=new Map;function kt(e){const a=atob(e),s=new Uint8Array(a.length);for(let r=0;r<a.length;r++)s[r]=a.charCodeAt(r);return s.buffer}function Rt(e,a){const s=Pe(e,a),r=document.querySelector(s);if(r!=null&&r.textContent){let g=JSON.parse(r.textContent),{body:d}=g,v=Ke(g,["body"]);const l=r.getAttribute("data-ttl");return l&&ce.set(s,{body:d,init:v,ttl:1e3*Number(l)}),r.getAttribute("data-b64")!==null&&(d=kt(d)),Promise.resolve(new Response(d,v))}return window.fetch(e,a)}function At(e,a,s){if(ce.size>0){const r=Pe(e,s),g=ce.get(r);if(g){if(performance.now()<g.ttl&&["default","force-cache","only-if-cached",void 0].includes(s==null?void 0:s.cache))return new Response(g.body,g.init);ce.delete(r)}}return window.fetch(a,s)}function Pe(e,a){let r=`script[data-sveltekit-fetched][data-url=${JSON.stringify(e instanceof Request?e.url:e)}]`;if(a!=null&&a.headers||a!=null&&a.body){const g=[];a.headers&&g.push([...new Headers(a.headers)].join(",")),a.body&&(typeof a.body=="string"||ArrayBuffer.isView(a.body))&&g.push(a.body),r+=`[data-hash="${St(...g)}"]`}return r}const It=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function Lt(e){const a=[];return{pattern:e==="/"?/^\/$/:new RegExp(`^${Ot(e).map(r=>{const g=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(r);if(g)return a.push({name:g[1],matcher:g[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const d=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(r);if(d)return a.push({name:d[1],matcher:d[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!r)return;const v=r.split(/\[(.+?)\](?!\])/);return"/"+v.map((h,w)=>{if(w%2){if(h.startsWith("x+"))return Ae(String.fromCharCode(parseInt(h.slice(2),16)));if(h.startsWith("u+"))return Ae(String.fromCharCode(...h.slice(2).split("-").map($=>parseInt($,16))));const p=It.exec(h);if(!p)throw new Error(`Invalid param: ${h}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,T,N,R,C]=p;return a.push({name:R,matcher:C,optional:!!T,rest:!!N,chained:N?w===1&&v[0]==="":!1}),N?"(.*?)":T?"([^/]*)?":"([^/]+?)"}return Ae(h)}).join("")}).join("")}/?$`),params:a}}function Pt(e){return!/^\([^)]+\)$/.test(e)}function Ot(e){return e.slice(1).split("/").filter(Pt)}function Ut(e,a,s){const r={},g=e.slice(1),d=g.filter(l=>l!==void 0);let v=0;for(let l=0;l<a.length;l+=1){const h=a[l];let w=g[l-v];if(h.chained&&h.rest&&v&&(w=g.slice(l-v,l+1).filter(p=>p).join("/"),v=0),w===void 0){h.rest&&(r[h.name]="");continue}if(!h.matcher||s[h.matcher](w)){r[h.name]=w;const p=a[l+1],T=g[l+1];p&&!p.rest&&p.optional&&T&&h.chained&&(v=0),!p&&!T&&Object.keys(r).length===d.length&&(v=0);continue}if(h.optional&&h.chained){v++;continue}return}if(!v)return r}function Ae(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function xt({nodes:e,server_loads:a,dictionary:s,matchers:r}){const g=new Set(a);return Object.entries(s).map(([l,[h,w,p]])=>{const{pattern:T,params:N}=Lt(l),R={id:l,exec:C=>{const $=T.exec(C);if($)return Ut($,N,r)},errors:[1,...p||[]].map(C=>e[C]),layouts:[0,...w||[]].map(v),leaf:d(h)};return R.errors.length=R.layouts.length=Math.max(R.errors.length,R.layouts.length),R});function d(l){const h=l<0;return h&&(l=~l),[h,e[l]]}function v(l){return l===void 0?l:[g.has(l),e[l]]}}function it(e){try{return JSON.parse(sessionStorage[e])}catch(a){}}function Ze(e,a){const s=JSON.stringify(a);try{sessionStorage[e]=s}catch(r){}}const Nt=-1,jt=-2,Tt=-3,$t=-4,Ct=-5,Dt=-6;function Ft(e,a){if(typeof e=="number")return g(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const s=e,r=Array(s.length);function g(d,v=!1){if(d===Nt)return;if(d===Tt)return NaN;if(d===$t)return 1/0;if(d===Ct)return-1/0;if(d===Dt)return-0;if(v)throw new Error("Invalid input");if(d in r)return r[d];const l=s[d];if(!l||typeof l!="object")r[d]=l;else if(Array.isArray(l))if(typeof l[0]=="string"){const h=l[0],w=a==null?void 0:a[h];if(w)return r[d]=w(g(l[1]));switch(h){case"Date":r[d]=new Date(l[1]);break;case"Set":const p=new Set;r[d]=p;for(let R=1;R<l.length;R+=1)p.add(g(l[R]));break;case"Map":const T=new Map;r[d]=T;for(let R=1;R<l.length;R+=2)T.set(g(l[R]),g(l[R+1]));break;case"RegExp":r[d]=new RegExp(l[1],l[2]);break;case"Object":r[d]=Object(l[1]);break;case"BigInt":r[d]=BigInt(l[1]);break;case"null":const N=Object.create(null);r[d]=N;for(let R=1;R<l.length;R+=2)N[l[R]]=g(l[R+1]);break;default:throw new Error(`Unknown type ${h}`)}}else{const h=new Array(l.length);r[d]=h;for(let w=0;w<l.length;w+=1){const p=l[w];p!==jt&&(h[w]=g(p))}}else{const h={};r[d]=h;for(const w in l){const p=l[w];h[w]=g(p)}}return r[d]}return g(0)}function Mt(e){return e.filter(a=>a!=null)}const st=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...st];const Vt=new Set([...st]);[...Vt];function qt(e,a){return O(this,null,function*(){var s;for(const r in e)if(typeof((s=e[r])==null?void 0:s.then)=="function")return Object.fromEntries(yield Promise.all(Object.entries(e).map(v=>O(this,[v],function*([g,d]){return[g,yield d]}))));return e})}const Ht="x-sveltekit-invalidated",Bt="x-sveltekit-trailing-slash";var tt;const Y=(tt=it(at))!=null?tt:{};var nt;const oe=(nt=it(rt))!=null?nt:{};function Ie(e){Y[e]=ie()}function X(e){return location.href=e.href,new Promise(()=>{})}function Gt(e,a){var Me;const s=xt(e),r=e.nodes[0],g=e.nodes[1];r(),g();const d=document.documentElement,v=[],l=[];let h=null;const w={before_navigate:[],on_navigate:[],after_navigate:[]};let p={branch:[],error:null,url:null},T=!1,N=!1,R=!0,C=!1,$=!1,F=!1,Z=!1,B,j=(Me=history.state)==null?void 0:Me[H];j||(j=Date.now(),history.replaceState(z(V({},history.state),{[H]:j}),"",location.href));const me=Y[j];me&&(history.scrollRestoration="manual",scrollTo(me.x,me.y));let K,Q,ee;function Oe(){return O(this,null,function*(){if(ee=ee||Promise.resolve(),yield ee,!ee)return;ee=null;const t=new URL(location.href),c=ne(t,!0);h=null;const n=Q={},i=c&&(yield _e(c));if(n===Q&&i){if(i.type==="redirect")return le(new URL(i.location,t).href,{},1,n);i.props.page!==void 0&&(K=i.props.page),B.$set(i.props)}})}function Ue(t){l.some(c=>c==null?void 0:c.snapshot)&&(oe[t]=l.map(c=>{var n;return(n=c==null?void 0:c.snapshot)==null?void 0:n.capture()}))}function xe(t){var c;(c=oe[t])==null||c.forEach((n,i)=>{var o,f;(f=(o=l[i])==null?void 0:o.snapshot)==null||f.restore(n)})}function Ne(){Ie(j),Ze(at,Y),Ue(j),Ze(rt,oe)}function le(E,k,A,b){return O(this,arguments,function*(t,{noScroll:c=!1,replaceState:n=!1,keepFocus:i=!1,state:o={},invalidateAll:f=!1},m,S){return typeof t=="string"&&(t=new URL(t,ze(document))),he({url:t,scroll:c?ie():null,keepfocus:i,redirect_count:m,details:{state:o,replaceState:n},nav_token:S,accepted:()=>{f&&(Z=!0)},blocked:()=>{},type:"goto"})})}function je(t){return O(this,null,function*(){return h={id:t.id,promise:_e(t).then(c=>(c.type==="loaded"&&c.state.error&&(h=null),c))},h.promise})}function fe(...t){return O(this,null,function*(){const n=s.filter(i=>t.some(o=>i.exec(o))).map(i=>Promise.all([...i.layouts,i.leaf].map(o=>o==null?void 0:o[1]())));yield Promise.all(n)})}function Te(t){var i,o;p=t.state;const c=document.querySelector("style[data-sveltekit]");c&&c.remove(),K=t.props.page,B=new e.root({target:a,props:z(V({},t.props),{stores:J,components:l}),hydrate:!0}),xe(j);const n={from:null,to:{params:p.params,route:{id:(o=(i=p.route)==null?void 0:i.id)!=null?o:null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};w.after_navigate.forEach(f=>f(n)),N=!0}function te(S){return O(this,arguments,function*({url:t,params:c,branch:n,status:i,error:o,route:f,form:m}){var y;let E="never";for(const L of n)(L==null?void 0:L.slash)!==void 0&&(E=L.slash);t.pathname=gt(t.pathname,E),t.search=t.search;const k={type:"loaded",state:{url:t,params:c,branch:n,error:o,route:f},props:{constructors:Mt(n).map(L=>L.node.component)}};m!==void 0&&(k.props.form=m);let A={},b=!K,I=0;for(let L=0;L<Math.max(n.length,p.branch.length);L+=1){const M=n[L],D=p.branch[L];(M==null?void 0:M.data)!==(D==null?void 0:D.data)&&(b=!0),M&&(A=V(V({},A),M.data),b&&(k.props[`data_${I}`]=A),I+=1)}return(!p.url||t.href!==p.url.href||p.error!==o||m!==void 0&&m!==K.form||b)&&(k.props.page={error:o,params:c,route:{id:(y=f==null?void 0:f.id)!=null?y:null},status:i,url:new URL(t),form:m!=null?m:null,data:b?A:K.data}),k})}function we(m){return O(this,arguments,function*({loader:t,parent:c,url:n,params:i,route:o,server_data_node:f}){var A,b,I,x,y,L,M;let S=null;const E={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},k=yield t();if((A=k.universal)!=null&&A.load){let D=function(...u){for(const _ of u){const{href:P}=new URL(_,n);E.dependencies.add(P)}},re;const q={route:new Proxy(o,{get:(u,_)=>(E.route=!0,u[_])}),params:new Proxy(i,{get:(u,_)=>(E.params.add(_),u[_])}),data:(b=f==null?void 0:f.data)!=null?b:null,url:_t(n,()=>{E.url=!0}),fetch(u,_){return O(this,null,function*(){let P;u instanceof Request?(P=u.url,_=V({body:u.method==="GET"||u.method==="HEAD"?void 0:yield u.blob(),cache:u.cache,credentials:u.credentials,headers:u.headers,integrity:u.integrity,keepalive:u.keepalive,method:u.method,mode:u.mode,redirect:u.redirect,referrer:u.referrer,referrerPolicy:u.referrerPolicy,signal:u.signal},_)):P=u;const U=new URL(P,n);return D(U.href),U.origin===n.origin&&(P=U.href.slice(n.origin.length)),N?At(P,U.href,_):Rt(P,_)})},setHeaders:()=>{},depends:D,parent(){return E.parent=!0,c()}};S=(I=yield k.universal.load.call(null,q))!=null?I:null,S=S?yield qt(S,o.id):null}return{node:k,loader:t,server:f,universal:(x=k.universal)!=null&&x.load?{type:"data",data:S,uses:E}:null,data:(y=S!=null?S:f==null?void 0:f.data)!=null?y:null,slash:n.pathname===G||n.pathname===G+"/"?"always":(M=(L=k.universal)==null?void 0:L.trailingSlash)!=null?M:f==null?void 0:f.slash}})}function $e(t,c,n,i,o){if(Z)return!0;if(!i)return!1;if(i.parent&&t||i.route&&c||i.url&&n)return!0;for(const f of i.params)if(o[f]!==p.params[f])return!0;for(const f of i.dependencies)if(v.some(m=>m(new URL(f))))return!0;return!1}function ye(t,c){return(t==null?void 0:t.type)==="data"?t:(t==null?void 0:t.type)==="skip"&&c!=null?c:null}function _e(f){return O(this,arguments,function*({id:t,invalidating:c,url:n,params:i,route:o}){var re;if((h==null?void 0:h.id)===t)return h.promise;const{errors:m,layouts:S,leaf:E}=o,k=[...S,E];m.forEach(u=>u==null?void 0:u().catch(()=>{})),k.forEach(u=>u==null?void 0:u[1]().catch(()=>{}));let A=null;const b=p.url?t!==p.url.pathname+p.url.search:!1,I=p.route?o.id!==p.route.id:!1;let x=!1;const y=k.map((u,_)=>{var W;const P=p.branch[_],U=!!(u!=null&&u[0])&&((P==null?void 0:P.loader)!==u[1]||$e(x,I,b,(W=P.server)==null?void 0:W.uses,i));return U&&(x=!0),U});if(y.some(Boolean)){try{A=yield Qe(n,y)}catch(u){return ue({status:u instanceof se?u.status:500,error:yield ae(u,{url:n,params:i,route:{id:o.id}}),url:n,route:o})}if(A.type==="redirect")return A}const L=A==null?void 0:A.nodes;let M=!1;const D=k.map((u,_)=>O(this,null,function*(){var ve;if(!u)return;const P=p.branch[_],U=L==null?void 0:L[_];if((!U||U.type==="skip")&&u[1]===(P==null?void 0:P.loader)&&!$e(M,I,b,(ve=P.universal)==null?void 0:ve.uses,i))return P;if(M=!0,(U==null?void 0:U.type)==="error")throw U;return we({loader:u[1],url:n,params:i,route:o,parent:()=>O(this,null,function*(){var qe;const Ve={};for(let be=0;be<_;be+=1)Object.assign(Ve,(qe=yield D[be])==null?void 0:qe.data);return Ve}),server_data_node:ye(U===void 0&&u[0]?{type:"skip"}:U!=null?U:null,u[0]?P==null?void 0:P.server:void 0)})}));for(const u of D)u.catch(()=>{});const q=[];for(let u=0;u<k.length;u+=1)if(k[u])try{q.push(yield D[u])}catch(_){if(_ instanceof Xe)return{type:"redirect",location:_.location};let P=500,U;if(L!=null&&L.includes(_))P=(re=_.status)!=null?re:P,U=_.error;else if(_ instanceof se)P=_.status,U=_.body;else{if(yield J.updated.check())return yield X(n);U=yield ae(_,{params:i,url:n,route:{id:o.id}})}const W=yield Ce(u,q,m);return W?yield te({url:n,params:i,branch:q.slice(0,W.idx).concat(W.node),status:P,error:U,route:o}):yield Fe(n,{id:o.id},U,P)}else q.push(void 0);return yield te({url:n,params:i,branch:q,status:200,error:null,route:o,form:c?void 0:null})})}function Ce(t,c,n){return O(this,null,function*(){for(;t--;)if(n[t]){let i=t;for(;!c[i];)i-=1;try{return{idx:i+1,node:{node:yield n[t](),loader:n[t],data:{},server:null,universal:null}}}catch(o){continue}}})}function ue(o){return O(this,arguments,function*({status:t,error:c,url:n,route:i}){var A;const f={};let m=null;if(e.server_loads[0]===0)try{const b=yield Qe(n,[!0]);if(b.type!=="data"||b.nodes[0]&&b.nodes[0].type!=="data")throw 0;m=(A=b.nodes[0])!=null?A:null}catch(b){(n.origin!==We||n.pathname!==location.pathname||T)&&(yield X(n))}const E=yield we({loader:r,url:n,params:f,route:i,parent:()=>Promise.resolve({}),server_data_node:ye(m)}),k={node:yield g(),loader:g,universal:null,server:null,data:null};return yield te({url:n,params:f,branch:[E,k],status:t,error:c,route:null})})}function ne(t,c){if(Re(t,G))return;const n=de(t);for(const i of s){const o=i.exec(n);if(o)return{id:t.pathname+t.search,invalidating:c,route:i,params:wt(o),url:t}}}function de(t){return mt(t.pathname.slice(G.length)||"/")}function De({url:t,type:c,intent:n,delta:i}){let o=!1;const f=et(p,n,t,c);i!==void 0&&(f.navigation.delta=i);const m=z(V({},f.navigation),{cancel:()=>{o=!0,f.reject(new Error("navigation was cancelled"))}});return $||w.before_navigate.forEach(S=>S(m)),o?null:f}function he(A){return O(this,arguments,function*({url:t,scroll:c,keepfocus:n,redirect_count:i,details:o,type:f,delta:m,nav_token:S={},accepted:E,blocked:k}){var D,q,re;const b=ne(t,!1),I=De({url:t,type:f,delta:m,intent:b});if(!I){k();return}const x=j;E(),$=!0,N&&J.navigating.set(I.navigation),Q=S;let y=b&&(yield _e(b));if(!y){if(Re(t,G))return yield X(t);y=yield Fe(t,{id:null},yield ae(new Error(`Not found: ${t.pathname}`),{url:t,params:{},route:{id:null}}),404)}if(t=(b==null?void 0:b.url)||t,Q!==S)return I.reject(new Error("navigation was aborted")),!1;if(y.type==="redirect")if(i>=20)y=yield ue({status:500,error:yield ae(new Error("Redirect loop"),{url:t,params:{},route:{id:null}}),url:t,route:{id:null}});else return le(new URL(y.location,t).href,{},i+1,S),!1;else((D=y.props.page)==null?void 0:D.status)>=400&&(yield J.updated.check())&&(yield X(t));if(v.length=0,Z=!1,C=!0,Ie(x),Ue(x),(q=y.props.page)!=null&&q.url&&y.props.page.url.pathname!==t.pathname&&(t.pathname=(re=y.props.page)==null?void 0:re.url.pathname),o){const u=o.replaceState?0:1;if(o.state[H]=j+=u,history[o.replaceState?"replaceState":"pushState"](o.state,"",t),!o.replaceState){let _=j+1;for(;oe[_]||Y[_];)delete oe[_],delete Y[_],_+=1}}if(h=null,N){p=y.state,y.props.page&&(y.props.page.url=t);const u=(yield Promise.all(w.on_navigate.map(_=>_(I.navigation)))).filter(_=>typeof _=="function");if(u.length>0){let _=function(){w.after_navigate=w.after_navigate.filter(P=>!u.includes(P))};u.push(_),w.after_navigate.push(...u)}B.$set(y.props)}else Te(y);const{activeElement:L}=document;if(yield Se(),R){const u=t.hash&&document.getElementById(decodeURIComponent(t.hash.slice(1)));c?scrollTo(c.x,c.y):u?u.scrollIntoView():scrollTo(0,0)}const M=document.activeElement!==L&&document.activeElement!==document.body;!n&&!M&&Le(),R=!0,y.props.page&&(K=y.props.page),$=!1,f==="popstate"&&xe(j),I.fulfil(void 0),w.after_navigate.forEach(u=>u(I.navigation)),J.navigating.set(null),C=!1})}function Fe(t,c,n,i){return O(this,null,function*(){return t.origin===We&&t.pathname===location.pathname&&!T?yield ue({status:i,error:n,url:t,route:c}):yield X(t)})}function lt(){let t;d.addEventListener("mousemove",f=>{const m=f.target;clearTimeout(t),t=setTimeout(()=>{i(m,2)},20)});function c(f){i(f.composedPath()[0],1)}d.addEventListener("mousedown",c),d.addEventListener("touchstart",c,{passive:!0});const n=new IntersectionObserver(f=>{for(const m of f)m.isIntersecting&&(fe(de(new URL(m.target.href))),n.unobserve(m.target))},{threshold:0});function i(f,m){const S=Je(f,d);if(!S)return;const{url:E,external:k,download:A}=ke(S,G);if(k||A)return;const b=ge(S);if(!b.reload)if(m<=b.preload_data){const I=ne(E,!1);I&&je(I)}else m<=b.preload_code&&fe(de(E))}function o(){n.disconnect();for(const f of d.querySelectorAll("a")){const{url:m,external:S,download:E}=ke(f,G);if(S||E)continue;const k=ge(f);k.reload||(k.preload_code===Ye.viewport&&n.observe(f),k.preload_code===Ye.eager&&fe(de(m)))}}w.after_navigate.push(o),o()}function ae(t,c){var n;return t instanceof se?t.body:(n=e.hooks.handleError({error:t,event:c}))!=null?n:{message:c.route.id===null&&t instanceof pt?"Not Found":"Internal Error"}}return{after_navigate:t=>{Ee(()=>(w.after_navigate.push(t),()=>{const c=w.after_navigate.indexOf(t);w.after_navigate.splice(c,1)}))},before_navigate:t=>{Ee(()=>(w.before_navigate.push(t),()=>{const c=w.before_navigate.indexOf(t);w.before_navigate.splice(c,1)}))},on_navigate:t=>{Ee(()=>(w.on_navigate.push(t),()=>{const c=w.on_navigate.indexOf(t);w.on_navigate.splice(c,1)}))},disable_scroll_handling:()=>{(C||!N)&&(R=!1)},goto:(t,c={})=>le(t,c,0),invalidate:t=>{if(typeof t=="function")v.push(t);else{const{href:c}=new URL(t,location.href);v.push(n=>n.href===c)}return Oe()},invalidate_all:()=>(Z=!0,Oe()),preload_data:t=>O(this,null,function*(){const c=new URL(t,ze(document)),n=ne(c,!1);if(!n)throw new Error(`Attempted to preload a URL that does not belong to this app: ${c}`);yield je(n)}),preload_code:fe,apply_action:t=>O(this,null,function*(){var c;if(t.type==="error"){const n=new URL(location.href),{branch:i,route:o}=p;if(!o)return;const f=yield Ce(p.branch.length,i,o.errors);if(f){const m=yield te({url:n,params:p.params,branch:i.slice(0,f.idx).concat(f.node),status:(c=t.status)!=null?c:500,error:t.error,route:o});p=m.state,B.$set(m.props),Se().then(Le)}}else t.type==="redirect"?le(t.location,{invalidateAll:!0},0):(B.$set({form:null,page:z(V({},K),{form:t.data,status:t.status})}),yield Se(),B.$set({form:t.data}),t.type==="success"&&Le())}),_start_router:()=>{var c;history.scrollRestoration="manual",addEventListener("beforeunload",n=>{let i=!1;if(Ne(),!$){const o=et(p,void 0,null,"leave"),f=z(V({},o.navigation),{cancel:()=>{i=!0,o.reject(new Error("navigation was cancelled"))}});w.before_navigate.forEach(m=>m(f))}i?(n.preventDefault(),n.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Ne()}),(c=navigator.connection)!=null&&c.saveData||lt(),d.addEventListener("click",n=>{var I,x,y;if(n.button||n.which!==1||n.metaKey||n.ctrlKey||n.shiftKey||n.altKey||n.defaultPrevented)return;const i=Je(n.composedPath()[0],d);if(!i)return;const{url:o,external:f,target:m,download:S}=ke(i,G);if(!o)return;if(m==="_parent"||m==="_top"){if(window.parent!==window)return}else if(m&&m!=="_self")return;const E=ge(i);if(!(i instanceof SVGAElement)&&o.protocol!==location.protocol&&!(o.protocol==="https:"||o.protocol==="http:")||S)return;if(f||E.reload){De({url:o,type:"link"})?$=!0:n.preventDefault();return}const[A,b]=o.href.split("#");if(b!==void 0&&A===location.href.split("#")[0]){if(p.url.hash===o.hash){n.preventDefault(),(I=i.ownerDocument.getElementById(b))==null||I.scrollIntoView();return}if(F=!0,Ie(j),t(o),!E.replace_state)return;F=!1,n.preventDefault()}he({url:o,scroll:E.noscroll?ie():null,keepfocus:(x=E.keep_focus)!=null?x:!1,redirect_count:0,details:{state:{},replaceState:(y=E.replace_state)!=null?y:o.href===location.href},accepted:()=>n.preventDefault(),blocked:()=>n.preventDefault(),type:"link"})}),d.addEventListener("submit",n=>{var y;if(n.defaultPrevented)return;const i=HTMLFormElement.prototype.cloneNode.call(n.target),o=n.submitter;if(((o==null?void 0:o.formMethod)||i.method)!=="get")return;const m=new URL((o==null?void 0:o.hasAttribute("formaction"))&&(o==null?void 0:o.formAction)||i.action);if(Re(m,G))return;const S=n.target,{keep_focus:E,noscroll:k,reload:A,replace_state:b}=ge(S);if(A)return;n.preventDefault(),n.stopPropagation();const I=new FormData(S),x=o==null?void 0:o.getAttribute("name");x&&I.append(x,(y=o==null?void 0:o.getAttribute("value"))!=null?y:""),m.search=new URLSearchParams(I).toString(),he({url:m,scroll:k?ie():null,keepfocus:E!=null?E:!1,redirect_count:0,details:{state:{},replaceState:b!=null?b:m.href===location.href},nav_token:{},accepted:()=>{},blocked:()=>{},type:"form"})}),addEventListener("popstate",n=>O(this,null,function*(){var i,o;if(Q={},(i=n.state)!=null&&i[H]){if(n.state[H]===j)return;const f=Y[n.state[H]],m=new URL(location.href);if(((o=p.url)==null?void 0:o.href.split("#")[0])===location.href.split("#")[0]){t(m),Y[j]=ie(),j=n.state[H],scrollTo(f.x,f.y);return}const S=n.state[H]-j;yield he({url:m,scroll:f,keepfocus:!1,redirect_count:0,details:null,accepted:()=>{j=n.state[H]},blocked:()=>{history.go(-S)},type:"popstate",delta:S,nav_token:Q})}else if(!F){const f=new URL(location.href);t(f)}})),addEventListener("hashchange",()=>{F&&(F=!1,history.replaceState(z(V({},history.state),{[H]:++j}),"",location.href))});for(const n of document.querySelectorAll("link"))n.rel==="icon"&&(n.href=n.href);addEventListener("pageshow",n=>{n.persisted&&J.navigating.set(null)});function t(n){p.url=n,J.page.set(z(V({},K),{url:n})),J.page.notify()}},_hydrate:S=>O(this,[S],function*({status:t=200,error:c,node_ids:n,params:i,route:o,data:f,form:m}){T=!0;const E=new URL(location.href);({params:i={},route:o={id:null}}=ne(E,!1)||{});let k;try{const A=n.map((x,y)=>O(this,null,function*(){const L=f[y];return L!=null&&L.uses&&(L.uses=ct(L.uses)),we({loader:e.nodes[x],url:E,params:i,route:o,parent:()=>O(this,null,function*(){const M={};for(let D=0;D<y;D+=1)Object.assign(M,(yield A[D]).data);return M}),server_data_node:ye(L)})})),b=yield Promise.all(A),I=s.find(({id:x})=>x===o.id);if(I){const x=I.layouts;for(let y=0;y<x.length;y++)x[y]||b.splice(y,0,void 0)}k=yield te({url:E,params:i,branch:b,status:t,error:c,form:m,route:I!=null?I:null})}catch(A){if(A instanceof Xe){yield X(new URL(A.location,location.href));return}k=yield ue({status:A instanceof se?A.status:500,error:yield ae(A,{url:E,params:i,route:o}),url:E,route:o})}Te(k)})}}function Qe(e,a){return O(this,null,function*(){var g;const s=new URL(e);s.pathname=Et(e.pathname),e.pathname.endsWith("/")&&s.searchParams.append(Bt,"1"),s.searchParams.append(Ht,a.map(d=>d?"1":"0").join(""));const r=yield ot(s.href);if((g=r.headers.get("content-type"))!=null&&g.includes("text/html")&&(yield X(e)),!r.ok)throw new se(r.status,yield r.json());return new Promise(d=>O(this,null,function*(){var T;const v=new Map,l=r.body.getReader(),h=new TextDecoder;function w(N){return Ft(N,{Promise:R=>new Promise((C,$)=>{v.set(R,{fulfil:C,reject:$})})})}let p="";for(;;){const{done:N,value:R}=yield l.read();if(N&&!p)break;for(p+=!R&&p?`
`:h.decode(R);;){const C=p.indexOf(`
`);if(C===-1)break;const $=JSON.parse(p.slice(0,C));if(p=p.slice(C+1),$.type==="redirect")return d($);if($.type==="data")(T=$.nodes)==null||T.forEach(F=>{(F==null?void 0:F.type)==="data"&&(F.uses=ct(F.uses),F.data=w(F.data))}),d($);else if($.type==="chunk"){const{id:F,data:Z,error:B}=$,j=v.get(F);v.delete(F),B?j.reject(w(B)):j.fulfil(w(Z))}}}}))})}function ct(e){var a,s;return{dependencies:new Set((a=e==null?void 0:e.dependencies)!=null?a:[]),params:new Set((s=e==null?void 0:e.params)!=null?s:[]),parent:!!(e!=null&&e.parent),route:!!(e!=null&&e.route),url:!!(e!=null&&e.url)}}function Le(){const e=document.querySelector("[autofocus]");if(e)e.focus();else{const a=document.body,s=a.getAttribute("tabindex");a.tabIndex=-1,a.focus({preventScroll:!0,focusVisible:!1}),s!==null?a.setAttribute("tabindex",s):a.removeAttribute("tabindex");const r=getSelection();if(r&&r.type!=="None"){const g=[];for(let d=0;d<r.rangeCount;d+=1)g.push(r.getRangeAt(d));setTimeout(()=>{if(r.rangeCount===g.length){for(let d=0;d<r.rangeCount;d+=1){const v=g[d],l=r.getRangeAt(d);if(v.commonAncestorContainer!==l.commonAncestorContainer||v.startContainer!==l.startContainer||v.endContainer!==l.endContainer||v.startOffset!==l.startOffset||v.endOffset!==l.endOffset)return}r.removeAllRanges()}})}}}function et(e,a,s,r){var h,w,p,T,N;let g,d;const v=new Promise((R,C)=>{g=R,d=C});return v.catch(()=>{}),{navigation:{from:{params:e.params,route:{id:(w=(h=e.route)==null?void 0:h.id)!=null?w:null},url:e.url},to:s&&{params:(p=a==null?void 0:a.params)!=null?p:null,route:{id:(N=(T=a==null?void 0:a.route)==null?void 0:T.id)!=null?N:null},url:s},willUnload:!a,type:r,complete:v},fulfil:g,reject:d}}function Yt(e,a,s){return O(this,null,function*(){const r=Gt(e,a);ht({client:r}),s?yield r._hydrate(s):r.goto(location.href,{replaceState:!0}),r._start_router()})}export{Yt as start};
