import{s as fe,z as ue,D as W,e as q,a as _e,c as T,b as p,f as x,g as ae,J as C,i as de,h as z,C as ge,E as X,F as Y,G as Z,K as he,L as V}from"./scheduler.BqdCgcHo.js";import{S as be,i as me,a as $,t as ee}from"./index.H_fSqiTt.js";import{g as Ee}from"./globals.BCpTnx5y.js";const{window:ne}=Ee,ye=t=>({}),te=t=>({}),we=t=>({}),oe=t=>({});function Re(t){let n,e,r,f,_,u,a,L,O;ue(t[21]);const h=t[20].background,l=W(h,t,t[19],oe),b=t[20].foreground,i=W(b,t,t[19],te);return{c(){n=q("svelte-scroller-outer"),e=q("svelte-scroller-background-container"),r=q("svelte-scroller-background"),l&&l.c(),_=_e(),u=q("svelte-scroller-foreground"),i&&i.c(),this.h()},l(s){n=T(s,"SVELTE-SCROLLER-OUTER",{class:!0});var c=p(n);e=T(c,"SVELTE-SCROLLER-BACKGROUND-CONTAINER",{class:!0,style:!0});var m=p(e);r=T(m,"SVELTE-SCROLLER-BACKGROUND",{class:!0});var E=p(r);l&&l.l(E),E.forEach(x),m.forEach(x),_=ae(c),u=T(c,"SVELTE-SCROLLER-FOREGROUND",{class:!0});var g=p(u);i&&i.l(g),g.forEach(x),c.forEach(x),this.h()},h(){C(r,"class","svelte-1yjh2jm"),C(e,"class","background-container svelte-1yjh2jm"),C(e,"style",f=""+(t[5]+t[4])),C(u,"class","svelte-1yjh2jm"),C(n,"class","svelte-1yjh2jm")},m(s,c){de(s,n,c),z(n,e),z(e,r),l&&l.m(r,null),t[22](r),z(n,_),z(n,u),i&&i.m(u,null),t[23](u),t[24](n),a=!0,L||(O=ge(ne,"resize",t[21]),L=!0)},p(s,c){l&&l.p&&(!a||c[0]&524288)&&X(l,h,s,s[19],a?Z(h,s[19],c,we):Y(s[19]),oe),(!a||c[0]&48&&f!==(f=""+(s[5]+s[4])))&&C(e,"style",f),i&&i.p&&(!a||c[0]&524288)&&X(i,b,s,s[19],a?Z(b,s[19],c,ye):Y(s[19]),te)},i(s){a||($(l,s),$(i,s),a=!0)},o(s){ee(l,s),ee(i,s),a=!1},d(s){s&&x(n),l&&l.d(s),t[22](null),i&&i.d(s),t[23](null),t[24](null),L=!1,O()}}}const d=[];let N;if(typeof window!="undefined"){const t=()=>d.forEach(n=>n());window.addEventListener("scroll",t),window.addEventListener("resize",t)}if(typeof IntersectionObserver!="undefined"){const t=new Map,n=new IntersectionObserver((e,r)=>{e.forEach(f=>{const _=t.get(f.target),u=d.indexOf(_);f.isIntersecting?u===-1&&d.push(_):(_(),u!==-1&&d.splice(u,1))})},{rootMargin:"400px 0px"});N={add:({outer:e,update:r})=>{const{top:f,bottom:_}=e.getBoundingClientRect();f<window.innerHeight&&_>0&&d.push(r),t.set(e,r),n.observe(e)},remove:({outer:e,update:r})=>{const f=d.indexOf(r);f!==-1&&d.splice(f,1),t.delete(e),n.unobserve(e)}}}else N={add:({update:t})=>{d.push(t)},remove:({update:t})=>{const n=d.indexOf(t);n!==-1&&d.splice(n,1)}};function ke(t,n,e){let r,f,_,u,a,{$$slots:L={},$$scope:O}=n,{top:h=0}=n,{bottom:l=1}=n,{threshold:b=.5}=n,{query:i="section"}=n,{parallax:s=!1}=n,{index:c=0}=n,{count:m=0}=n,{offset:E=0}=n,{progress:g=0}=n,{visible:A=!1}=n,S,y,M,K,v,w=0,R,j=0,D=1;he(()=>{v=y.querySelectorAll(i),e(7,m=v.length),G();const o={outer:S,update:G};return N.add(o),()=>N.remove(o)});function G(){if(!y)return;const o=S.getBoundingClientRect();K=o.left,e(18,D=o.right-K);const k=y.getBoundingClientRect(),F=M.getBoundingClientRect();e(10,A=k.top<w&&k.bottom>0);const I=k.bottom-k.top,H=F.bottom-F.top,U=f-r;e(9,g=(r-k.top)/(I-U)),g<=0?(e(17,j=0),e(16,R=!1)):g>=1?(e(17,j=s?I-H:I-U),e(16,R=!1)):(e(17,j=s?Math.round(r-g*(H-U)):r),e(16,R=!0));for(let B=0;B<v.length;B++){const ce=v[B],{top:J}=ce.getBoundingClientRect(),P=v[B+1],Q=P?P.getBoundingClientRect().top:k.bottom;if(e(8,E=(_-J)/(Q-J)),Q>=_){e(6,c=B);break}}}function se(){e(0,w=ne.innerHeight)}function re(o){V[o?"unshift":"push"](()=>{M=o,e(3,M)})}function le(o){V[o?"unshift":"push"](()=>{y=o,e(2,y)})}function ie(o){V[o?"unshift":"push"](()=>{S=o,e(1,S)})}return t.$$set=o=>{"top"in o&&e(11,h=o.top),"bottom"in o&&e(12,l=o.bottom),"threshold"in o&&e(13,b=o.threshold),"query"in o&&e(14,i=o.query),"parallax"in o&&e(15,s=o.parallax),"index"in o&&e(6,c=o.index),"count"in o&&e(7,m=o.count),"offset"in o&&e(8,E=o.offset),"progress"in o&&e(9,g=o.progress),"visible"in o&&e(10,A=o.visible),"$$scope"in o&&e(19,O=o.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2049&&(r=Math.round(h*w)),t.$$.dirty[0]&4097&&(f=Math.round(l*w)),t.$$.dirty[0]&8193&&(_=Math.round(b*w)),t.$$.dirty[0]&47104&&G(),t.$$.dirty[0]&196608&&e(5,u=`
		position: ${R?"fixed":"absolute"};
		top: 0;
		transform: translate(0, ${j}px);
		z-index: 1;
	`),t.$$.dirty[0]&327680&&e(4,a=R?`width:${D}px;`:"")},[w,S,y,M,a,u,c,m,E,g,A,h,l,b,i,s,R,j,D,O,L,se,re,le,ie]}class Se extends be{constructor(n){super(),me(this,n,ke,Re,fe,{top:11,bottom:12,threshold:13,query:14,parallax:15,index:6,count:7,offset:8,progress:9,visible:10},null,[-1,-1])}}export{Se as S};
